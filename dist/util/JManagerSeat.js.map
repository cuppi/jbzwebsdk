{"version":3,"sources":["util/JManagerSeat.js"],"names":["__assign","t","s","i","n","arguments","length","p","Object","prototype","hasOwnProperty","call","defineProperty","exports","value","JToolString_js_1","require","AutoSeatPicking_1","_cellSize","_cellSpace","instance","SeatManager","defaultManager","smartAutoSelected","smartSeats","count","reduce","reject","default","autoSelected","data","seatParasFromScreening","platform","screening","paras","cinemaId","showId","hallId","smartSeatsFromSeats","type","seatData","seatList","unitySeatWithSeatData","smartSeatsWithSeats","smartSeatDataFromSmartSeats","seatRowData","rowDataFromSmartSeats","seatContentData","seatContentDataFromSmartSeats","smartSeatDataFromSeats","seatList_1","sections","_i","sections_1","section","sectionId","seatMap_1","seatMap","maxRow_1","maxRow","maxColumn_1","maxColumn","j","seat","status","push","isSeat","seatNo","rowId","columnId","smartSeatsWithWPSeats","smartSeatsWithSPSeats","smartSeatsWithMZSeats","smartSeatsWithDCSeats","smartSeatsWithMYSeats","smartSeatsWithBDSeats","map","seatModel","row","key","split","shift","col","pop","rowNumber","numberFromString","Name","colNumber","bridgeModel","seatRowModel","Status","rowLocation","colLocation","loveIndex","LoveFlag","rowNum","columnNum","isLock","console","log","rowNo","columnNo","isLove","areaInfo","area","seatContentSizeWithSmartSeats","maxWidth","maxHeight","smartSeats_1","smartSeatModel","seatContentWidth","seatContentHeight","seatContentSize","width","height","dict","smartSeats_2","set","allRowNumber","keys","allRowData","_a","allRowNumber_1","get","sort","a","b","toString","localeCompare"],"mappings":"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","file":"JManagerSeat.js","sourcesContent":["\"use strict\";\n/**\n * Created by cuppi on 2016/12/5.\n */\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar JToolString_js_1 = require(\"../tool/JToolString.js\");\nvar AutoSeatPicking_1 = require(\"../arithmetic/AutoSeatPicking\");\nvar _cellSize = 30;\nvar _cellSpace = 8;\nvar instance = null;\n/**\n * 座位图管理类\n * @module manager\n */\nvar SeatManager = (function () {\n    /**\n     * 构造器\n     * @returns {*}\n     */\n    function SeatManager() {\n        if (!instance) {\n            instance = this;\n        }\n        return instance;\n    }\n    /**\n     * 单例方法\n     * @returns {SeatManager}\n     */\n    SeatManager.defaultManager = function () {\n        return new SeatManager();\n    };\n    /**\n     * 智能选座\n     * @param smartSeats\n     * @param count\n     * @returns {Promise}\n     */\n    SeatManager.smartAutoSelected = function (smartSeats, count) {\n        return new Promise(function (reduce, reject) {\n            AutoSeatPicking_1.default.defaultManager().autoSelected(smartSeats, count, function (data) {\n                reduce(data);\n            });\n        });\n    };\n    /**\n     * 获取座位图时需要的参数\n     * @param platform 平台类型\n     * @param screening 平台数据\n     * @returns {Object} 平台需要的参数\n     */\n    SeatManager.seatParasFromScreening = function (platform, screening) {\n        var paras = {};\n        if (platform === 'wangpiao') {\n            paras = {\n                cinemaId: screening.cinemaId,\n                showId: screening.showId\n            };\n        }\n        if (platform === 'spider') {\n            paras = {\n                cinemaId: screening.cinemaId,\n                showId: screening.showId,\n                hallId: screening.hallId\n            };\n        }\n        if (platform === 'maizuo') {\n            paras = {\n                showId: screening.showId\n            };\n        }\n        if (platform === 'danche') {\n            paras = {\n                showId: screening.showId\n            };\n        }\n        if (platform === 'maoyan' || platform === 'meituan' || platform === 'dazhong') {\n            paras = {\n                showId: screening.showId\n            };\n        }\n        if (platform === 'baidu') {\n            paras = {\n                showId: screening.showId\n            };\n        }\n        return paras;\n    };\n    /**\n     * 对原始座位图进行智能转换\n     * @param type 平台类型\n     * @param seatData 座位图原始数据\n     * @returns {Array} 智能座位图列表\n     */\n    SeatManager.prototype.smartSeatsFromSeats = function (type, seatData) {\n        var seatList = this.unitySeatWithSeatData(type, seatData);\n        // 获取智能座位图\n        return this.smartSeatsWithSeats(type, seatList);\n    };\n    /**\n     * 获取智能座位图元数据\n     * @param type 平台类型\n     * @param smartSeats 智能座位图\n     * @returns {{smartSeats: Array, seatRowData: Array.<*>}} 智能座位图详细信息\n     */\n    SeatManager.prototype.smartSeatDataFromSmartSeats = function (type, smartSeats) {\n        var seatRowData = this.rowDataFromSmartSeats(smartSeats);\n        var seatContentData = this.seatContentDataFromSmartSeats(smartSeats);\n        return __assign({ smartSeats: smartSeats, seatRowData: seatRowData }, seatContentData);\n    };\n    /**\n     * 对原始座位图进行智能转换\n     * @param type 平台类型\n     * @param seatData 座位图原始数据\n     * @returns {{smartSeats: Array, seatRowData: Array.<*>}} 智能座位图详细信息\n     */\n    SeatManager.prototype.smartSeatDataFromSeats = function (type, seatData) {\n        // 获取智能座位图\n        var smartSeats = this.smartSeatsFromSeats(type, seatData);\n        return this.smartSeatDataFromSmartSeats(type, smartSeats);\n    };\n    /** ***********************  下面的方法为内部方法  ******************** **/\n    /**\n     * 统一座位格式\n     * @private\n     * @param type\n     * @param seatData\n     * @returns {Array}\n     */\n    SeatManager.prototype.unitySeatWithSeatData = function (type, seatData) {\n        if (type === 'maoyan' || type === 'meituan' || type === 'dazhong') {\n            var seatList_1 = [];\n            var sections = seatData.sections;\n            for (var _i = 0, sections_1 = sections; _i < sections_1.length; _i++) {\n                var section = sections_1[_i];\n                for (var sectionId in section) {\n                    if (section.hasOwnProperty(sectionId)) {\n                        var seatMap_1 = section[sectionId].seatMap;\n                        var maxRow_1 = section[sectionId].maxRow ? section[sectionId].maxRow : 0;\n                        var maxColumn_1 = section[sectionId].maxColumn ? section[sectionId].maxColumn : 0;\n                        for (var i = 0; i <= maxRow_1; i++) {\n                            for (var j = 0; j <= maxColumn_1; j++) {\n                                var seat = seatMap_1[i + ':' + j];\n                                // 去掉走廊\n                                if (seat && seat.status !== 'E') {\n                                    seat.sectionId = sectionId;\n                                    // 时间复杂度多了  但是代码整洁\n                                    seatList_1.push(seat);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            return seatList_1;\n        }\n        var seatList = [];\n        var seatMap = seatData.seatMap;\n        var maxRow = seatData.maxRow;\n        var maxColumn = seatData.maxColumn;\n        // 获取基本座位图\n        if (type === 'danche') {\n            for (var i = 0; i <= maxRow; i++) {\n                for (var j = 0; j <= maxColumn; j++) {\n                    var seat = seatMap[i + ':' + j];\n                    if (seat && seat.isSeat) {\n                        // 时间复杂度多了  但是代码整洁\n                        seatList.push(seat);\n                    }\n                }\n            }\n        }\n        else if (type === 'baidu') {\n            for (var i = 0; i <= maxRow; i++) {\n                for (var j = 0; j <= maxColumn; j++) {\n                    var seat = seatMap[i + ':' + j];\n                    if (seat && seat.seatNo && seat.seatNo !== '') {\n                        seat.rowId = i;\n                        seat.columnId = j;\n                        // 时间复杂度多了  但是代码整洁\n                        seatList.push(seat);\n                    }\n                }\n            }\n        }\n        else {\n            for (var i = 0; i <= maxRow; i++) {\n                for (var j = 0; j <= maxColumn; j++) {\n                    var seat = seatMap[i + ':' + j];\n                    if (seat) {\n                        // 时间复杂度多了  但是代码整洁\n                        seatList.push(seat);\n                    }\n                }\n            }\n        }\n        return seatList;\n    };\n    /**\n     * 获取智能座位图通用方法\n     * @private\n     * @param type 平台类型\n     * @param seatList 基本座位图\n     * @returns {Array} 智能座位图\n     */\n    SeatManager.prototype.smartSeatsWithSeats = function (type, seatList) {\n        if (type === 'wangpiao') {\n            return this.smartSeatsWithWPSeats(seatList);\n        }\n        if (type === 'spider') {\n            return this.smartSeatsWithSPSeats(seatList);\n        }\n        if (type === 'maizuo') {\n            return this.smartSeatsWithMZSeats(seatList);\n        }\n        if (type === 'danche') {\n            return this.smartSeatsWithDCSeats(seatList);\n        }\n        if (type === 'maoyan' || type === 'meituan' || type === 'dazhong') {\n            return this.smartSeatsWithMYSeats(seatList);\n        }\n        if (type === 'baidu') {\n            return this.smartSeatsWithBDSeats(seatList);\n        }\n    };\n    /**\n     * 获取网票智能座位图\n     * @private\n     * @param seatList\n     * @returns {Array}\n     */\n    SeatManager.prototype.smartSeatsWithWPSeats = function (seatList) {\n        return seatList.map(function (seatModel) {\n            var row = Number.parseInt(seatModel.key.split(':').shift());\n            var col = Number.parseInt(seatModel.key.split(':').pop());\n            var rowNumber = JToolString_js_1.default.numberFromString(seatModel.Name.split(':').shift(), true, 1);\n            var colNumber = JToolString_js_1.default.numberFromString(seatModel.Name.split(':').pop(), true, 1);\n            return {\n                row: row,\n                col: col,\n                rowNumber: rowNumber,\n                colNumber: colNumber,\n                seatModel: seatModel\n            };\n        }).map(function (bridgeModel) {\n            var seatRowModel = bridgeModel.seatModel;\n            return __assign({}, bridgeModel, { \n                // N:lock  Y:unLock\n                status: seatRowModel.Status === 'Y' ? 0 : 1, rowLocation: bridgeModel.row * (_cellSize + _cellSpace), colLocation: bridgeModel.col * (_cellSize + _cellSpace), loveIndex: Number.parseInt(seatRowModel.LoveFlag) });\n        });\n    };\n    /**\n     * 获取蜘蛛智能座位图\n     * @private\n     * @param seatList\n     * @returns {Array}\n     */\n    SeatManager.prototype.smartSeatsWithSPSeats = function (seatList) {\n        return seatList.map(function (seatModel) {\n            var row = Number.parseInt(seatModel.rowNum);\n            var col = Number.parseInt(seatModel.columnNum);\n            var rowNumber = Number.parseInt(JToolString_js_1.default.numberFromString(seatModel.rowId, true, 1));\n            var colNumber = Number.parseInt(JToolString_js_1.default.numberFromString(seatModel.columnId, true, 1));\n            return {\n                row: row,\n                col: col,\n                rowNumber: rowNumber,\n                colNumber: colNumber,\n                seatModel: seatModel\n            };\n        }).map(function (bridgeModel) {\n            var seatRowModel = bridgeModel.seatModel;\n            return __assign({}, bridgeModel, { status: seatRowModel.isLock\n                    ? 1\n                    : 0, rowLocation: bridgeModel.row * (_cellSize + _cellSpace), colLocation: bridgeModel.col * (_cellSize + _cellSpace), loveIndex: Number.parseInt(seatRowModel.loveIndex) });\n        });\n    };\n    /**\n     * 获取卖座智能座位图\n     * @private\n     * @param seatList\n     * @returns {Array}\n     */\n    SeatManager.prototype.smartSeatsWithMZSeats = function (seatList) {\n        return seatList.map(function (seatModel) {\n            var row = Number.parseInt(seatModel.rowNum);\n            var col = Number.parseInt(seatModel.columnNum);\n            var rowNumber = Number.parseInt(JToolString_js_1.default.numberFromString(seatModel.rowId, true, 1));\n            var colNumber = Number.parseInt(JToolString_js_1.default.numberFromString(seatModel.columnId, true, 1));\n            // 上海百美汇影城\n            return {\n                row: row,\n                col: col,\n                rowNumber: rowNumber,\n                colNumber: colNumber,\n                seatModel: seatModel\n            };\n        }).map(function (bridgeModel) {\n            var seatRowModel = bridgeModel.seatModel;\n            return __assign({}, bridgeModel, { status: seatRowModel.isLock === '1'\n                    ? 1\n                    : 0, rowLocation: bridgeModel.row * (_cellSize + _cellSpace), colLocation: bridgeModel.col * (_cellSize + _cellSpace), loveIndex: Number.parseInt(seatRowModel.loveIndex) });\n        });\n    };\n    /**\n     * 获取单车智能座位图\n     * @private\n     * @param seatList\n     * @returns {Array}\n     */\n    SeatManager.prototype.smartSeatsWithDCSeats = function (seatList) {\n        return seatList.map(function (seatModel) {\n            var row = Number.parseInt(seatModel.rowNum);\n            var col = Number.parseInt(seatModel.columnNum);\n            var rowNumber = Number.parseInt(JToolString_js_1.default.numberFromString(seatModel.rowId, true, 1));\n            var colNumber = Number.parseInt(JToolString_js_1.default.numberFromString(seatModel.columnId, true, 1));\n            return {\n                row: row,\n                col: col,\n                rowNumber: rowNumber,\n                colNumber: colNumber,\n                seatModel: seatModel\n            };\n        }).map(function (bridgeModel) {\n            var seatRowModel = bridgeModel.seatModel;\n            console.log(seatRowModel.loveIndex);\n            return __assign({}, bridgeModel, { status: seatRowModel.isLock\n                    ? 1\n                    : 0, rowLocation: bridgeModel.row * (_cellSize + _cellSpace), colLocation: bridgeModel.col * (_cellSize + _cellSpace), loveIndex: Number.parseInt(seatRowModel.loveIndex) });\n        });\n    };\n    /**\n     * 获取猫眼智能座位图\n     * @private\n     * @param seatList\n     * @returns {Array}\n     */\n    SeatManager.prototype.smartSeatsWithMYSeats = function (seatList) {\n        return seatList.map(function (seatModel) {\n            var row = Number.parseInt(seatModel.rowNo);\n            var col = Number.parseInt(seatModel.columnNo);\n            var rowNumber = Number.parseInt(JToolString_js_1.default.numberFromString(seatModel.rowId, true, 1));\n            var colNumber = Number.parseInt(JToolString_js_1.default.numberFromString(seatModel.columnId, true, 1));\n            return {\n                row: row,\n                col: col,\n                rowNumber: rowNumber,\n                colNumber: colNumber,\n                seatModel: seatModel\n            };\n        }).map(function (bridgeModel) {\n            var seatRowModel = bridgeModel.seatModel;\n            var loveIndex = 0;\n            if (seatRowModel.status === 'L') {\n                loveIndex = 1;\n            }\n            else if (seatRowModel.status === 'R') {\n                loveIndex = 2;\n            }\n            return __assign({}, bridgeModel, { status: seatRowModel.status === 'LK'\n                    ? 1\n                    : 0, rowLocation: bridgeModel.row * (_cellSize + _cellSpace), colLocation: bridgeModel.col * (_cellSize + _cellSpace), loveIndex: loveIndex });\n        });\n    };\n    /**\n     * 获取百度智能座位图\n     * @private\n     * @param seatList\n     * @returns {Array}\n     */\n    SeatManager.prototype.smartSeatsWithBDSeats = function (seatList) {\n        return seatList.map(function (seatModel) {\n            var row = Number.parseInt(seatModel.rowId);\n            var col = Number.parseInt(seatModel.columnId);\n            var rowNumber = Number.parseInt(JToolString_js_1.default.numberFromString(seatModel.rowNo, true, 1));\n            var colNumber = Number.parseInt(JToolString_js_1.default.numberFromString(seatModel.columnNo, true, 1));\n            return {\n                row: row,\n                col: col,\n                rowNumber: rowNumber,\n                colNumber: colNumber,\n                seatModel: seatModel\n            };\n        }).map(function (bridgeModel) {\n            var seatRowModel = bridgeModel.seatModel;\n            return __assign({}, bridgeModel, { status: seatRowModel.status === '2'\n                    ? 1\n                    : 0, rowLocation: bridgeModel.row * (_cellSize + _cellSpace), colLocation: bridgeModel.col * (_cellSize + _cellSpace), loveIndex: Number.parseInt(seatRowModel.isLove), areaInfo: seatRowModel.area });\n        });\n    };\n    /**\n     * 获取座位图尺寸\n     * @private\n     * @param smartSeats 智能座位图\n     * @returns {{width: *, height: *}} 座位图尺寸\n     */\n    SeatManager.prototype.seatContentSizeWithSmartSeats = function (smartSeats) {\n        // 计算座位图大小\n        var maxWidth = 0;\n        var maxHeight = 0;\n        for (var _i = 0, smartSeats_1 = smartSeats; _i < smartSeats_1.length; _i++) {\n            var smartSeatModel = smartSeats_1[_i];\n            if (maxWidth < smartSeatModel.colLocation) {\n                maxWidth = smartSeatModel.colLocation;\n            }\n            if (maxHeight < smartSeatModel.rowLocation) {\n                maxHeight = smartSeatModel.rowLocation;\n            }\n        }\n        var seatContentWidth = maxWidth + _cellSize;\n        var seatContentHeight = maxHeight + _cellSize;\n        return { 'width': seatContentWidth, 'height': seatContentHeight };\n    };\n    /**\n     * 获取座位图元数据\n     * @private\n     * @param smartSeats 智能座位图\n     * @returns {{seatCellWidth: number, seatCellHeight: number, seatContentWidth, seatContentHeight}}\n     */\n    SeatManager.prototype.seatContentDataFromSmartSeats = function (smartSeats) {\n        var seatContentSize = this.seatContentSizeWithSmartSeats(smartSeats);\n        return {\n            'seatCellSpace': _cellSpace,\n            'seatCellWidth': _cellSize,\n            'seatCellHeight': _cellSize,\n            'seatContentWidth': seatContentSize.width,\n            'seatContentHeight': seatContentSize.height\n        };\n    };\n    /**\n     * 获取行号数据\n     * @private\n     * @param smartSeats 智能座位图\n     * @returns {Array.<*>} 返回行号数据 {rowNumber, colLocation}\n     */\n    SeatManager.prototype.rowDataFromSmartSeats = function (smartSeats) {\n        var dict = new Map();\n        for (var _i = 0, smartSeats_2 = smartSeats; _i < smartSeats_2.length; _i++) {\n            var seat = smartSeats_2[_i];\n            var row = seat.rowNumber;\n            if (dict.hasOwnProperty(row)) {\n                continue;\n            }\n            dict.set(row, seat.rowLocation);\n        }\n        var allRowNumber = dict.keys();\n        var allRowData = [];\n        for (var _a = 0, allRowNumber_1 = allRowNumber; _a < allRowNumber_1.length; _a++) {\n            var rowNumber = allRowNumber_1[_a];\n            allRowData.push({ rowNumber: rowNumber, colLocation: dict.get(rowNumber) });\n        }\n        return allRowData.sort(function (a, b) {\n            return a.rowNumber.toString().localeCompare(b.rowNumber.toString());\n        });\n    };\n    return SeatManager;\n}());\nexports.default = SeatManager;\n"]}