{"version":3,"sources":["network/JNetworkCinema.js"],"names":["Object","defineProperty","exports","value","JUrlList_1","require","JToolDate_1","JDataUnify_1","JManagerSeat_1","JNetworkRoot_1","JNetworkCinema","cinemaId","resolve","reject","prefixPromise","cinemaUrl","jbzDetail","then","default","data","error","location","cinemaFilter","undefined","u","filmId","feature","region","sort","limit","jbzList","regionName","orderType","jbzScreeningFilmList","jbzScreeningDateList","date","dateStringFromTimeInterval","jbzScreeningItems","type","paras","jbzRealtimeSeat","defaultManager","smartSeatsFromSeats","cinemaName","jbzCollectcinema","jbzCancelcollectcinema","instance","cinemaDetail","a","b","cinemaList","cinemaScreeningFilmList","cinemaScreeningDateList","cinemaScreeningItems","cinemaSeats","cinemaSmartSeats","cinemaFavoriteCinema","cinemaCancelFavoriteCinema"],"mappings":"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","file":"JNetworkCinema.js","sourcesContent":["/**\n * Created by cuppi on 2016/11/29.\n */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst JUrlList_1 = require(\"../unify/JUrlList\");\nconst JToolDate_1 = require(\"../tool/JToolDate\");\nconst JDataUnify_1 = require(\"../unify/JDataUnify\");\nconst JManagerSeat_1 = require(\"../util/JManagerSeat\");\nconst JNetworkRoot_1 = require(\"./JNetworkRoot\");\n/**\n * 影院接口\n * @memberOf module:network\n */\nclass JNetworkCinema extends JNetworkRoot_1.default {\n    /**\n     * 获取影院详情\n     * @param {string} cinemaId 影院ID\n     * @returns {Promise} promise\n     */\n    cinemaDetail(cinemaId) {\n        return new Promise((resolve, reject) => {\n            this.prefixPromise(JUrlList_1.cinemaUrl.jbzDetail, { cinemaId }).then(data => {\n                resolve(JDataUnify_1.default('cinemaUrl.jbzDetail', data, 0));\n            }, error => {\n                reject(error);\n            });\n        });\n    }\n    cinemaList(location, cinemaFilter) {\n        if (cinemaFilter == undefined) {\n            cinemaFilter = location;\n        }\n        return new Promise((resolve, reject) => {\n            let u = undefined;\n            let { filmId, feature, region, sort, limit } = cinemaFilter ? cinemaFilter : { filmId: u, feature: u, region: u, sort: u, limit: u };\n            this.prefixPromise(JUrlList_1.cinemaUrl.jbzList, Object.assign({}, location, { filmId,\n                feature, regionName: region, orderType: sort, limit })).then(data => {\n                resolve(JDataUnify_1.default('cinemaUrl.jbzList', data));\n            }, error => {\n                reject(error);\n            });\n        });\n    }\n    /**\n     * 获取指定影院排片\n     * @param cinemaId 影院Id\n     * @returns {{terminate, then}|*}\n     */\n    cinemaScreeningFilmList(cinemaId) {\n        return new Promise((resolve, reject) => {\n            return this.prefixPromise(JUrlList_1.cinemaUrl.jbzScreeningFilmList, {\n                cinemaId\n            }).then(data => {\n                resolve(JDataUnify_1.default('cinemaUrl.jbzScreeningFilmList', data));\n            }, error => {\n                reject(error);\n            });\n        });\n    }\n    /**\n     * 获取指定影院排片日期安排\n     * @param cinemaId 影院Id\n     * @param filmId 影片Id\n     * @returns {{terminate, then}|*}\n     */\n    cinemaScreeningDateList(cinemaId, filmId) {\n        return new Promise((resolve, reject) => {\n            this.prefixPromise(JUrlList_1.cinemaUrl.jbzScreeningDateList, { cinemaId, filmId }).then(data => {\n                resolve(JDataUnify_1.default('cinemaUrl.jbzScreeningDateList', data));\n            }, error => {\n                reject(error);\n            });\n        });\n    }\n    /**\n     * 获取指定影院排片放映厅安排\n     * @param cinemaId 影院Id\n     * @param filmId 影片Id\n     * @param date 日期（时间戳标示）\n     * @returns {{terminate, then}|*}\n     */\n    cinemaScreeningItems(cinemaId, filmId, date) {\n        return new Promise((resolve, reject) => {\n            date = JToolDate_1.default.dateStringFromTimeInterval(date, 'yyyy-MM-dd');\n            this.prefixPromise(JUrlList_1.cinemaUrl.jbzScreeningItems, { cinemaId, filmId, date }).then(data => {\n                resolve(JDataUnify_1.default('cinemaUrl.jbzScreeningItems', data));\n            }, error => {\n                reject(error);\n            });\n        });\n    }\n    ;\n    /**\n     * 实时座位图\n     * @param type 平台类型 （必须）\n     * @param paras （根据不同平台变化）\n     * @returns {*}\n     */\n    cinemaSeats(type, paras) {\n        if (type === 'meituan' || type === 'dazhong') {\n            type = 'maoyan';\n        }\n        return new Promise((resolve, reject) => {\n            this.prefixPromise(JUrlList_1.cinemaUrl.jbzRealtimeSeat, Object.assign({ type }, paras)).then(data => {\n                resolve(JDataUnify_1.default('cinemaUrl.jbzRealtimeSeat', data));\n            }, error => {\n                reject(error);\n            });\n        });\n    }\n    /**\n     * 智能实时座位图\n     * @param type 平台类型 （必须）\n     * @param paras （根据不同平台变化）\n     * @returns {*}\n     */\n    cinemaSmartSeats(type, paras) {\n        if (type === 'meituan' || type === 'dazhong') {\n            type = 'maoyan';\n        }\n        return new Promise((resolve, reject) => {\n            this.prefixPromise(JUrlList_1.cinemaUrl.jbzRealtimeSeat, Object.assign({ type }, paras)).then(data => {\n                resolve(JManagerSeat_1.default.defaultManager().smartSeatsFromSeats(type, JDataUnify_1.default('cinemaUrl.jbzRealtimeSmartSeat', data)));\n            }, error => {\n                reject(error);\n            });\n        });\n    }\n    /**\n     * 收藏影院\n     * @param cinemaId 影院Id\n     * @param cinemaName 影院名字\n     * @returns {{terminate, then}|*}\n     */\n    cinemaFavoriteCinema(cinemaId, cinemaName) {\n        return this.prefixPromise(JUrlList_1.cinemaUrl.jbzCollectcinema, {\n            cinemaId: cinemaId,\n            cinemaName: cinemaName\n        });\n    }\n    /**\n     * 取消收藏影院\n     * @param cinemaId 影院Id\n     * @returns {{terminate, then}|*}\n     */\n    cinemaCancelFavoriteCinema(cinemaId) {\n        return this.prefixPromise(JUrlList_1.cinemaUrl.jbzCancelcollectcinema, {});\n    }\n    static cinemaDetail(cinemaId) {\n        return this.instance().cinemaDetail(cinemaId);\n    }\n    static cinemaList(a, b) {\n        return this.instance().cinemaList(a, b);\n    }\n    static cinemaScreeningFilmList(cinemaId) {\n        return this.instance().cinemaScreeningFilmList(cinemaId);\n    }\n    static cinemaScreeningDateList(cinemaId, filmId) {\n        return this.instance().cinemaScreeningDateList(cinemaId, filmId);\n    }\n    static cinemaScreeningItems(cinemaId, filmId, date) {\n        return this.instance().cinemaScreeningItems(cinemaId, filmId, date);\n    }\n    ;\n    static cinemaSeats(type, paras) {\n        return this.instance().cinemaSeats(type, paras);\n    }\n    static cinemaSmartSeats(type, paras) {\n        return this.instance().cinemaSmartSeats(type, paras);\n    }\n    static cinemaFavoriteCinema(cinemaId, cinemaName) {\n        return this.instance().cinemaFavoriteCinema(cinemaId, cinemaName);\n    }\n    static cinemaCancelFavoriteCinema(cinemaId) {\n        return this.instance().cinemaCancelFavoriteCinema(cinemaId);\n    }\n}\nexports.default = JNetworkCinema;\n"]}